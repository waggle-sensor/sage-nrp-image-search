apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: sage

# This overlay references the INQUIRE benchmark base and patches it
# to work with the prod environment (prod-weaviate, prod-triton, etc.)
resources:
  - ..

patches:
  # Patch evaluator environment variables to use prod services
  - path: env.yaml
    target:
      kind: Deployment
      labelSelector: "app=benchmark-evaluator"
  # Patch data loader environment variables to use prod services
  - path: data-loader-env.yaml
    target:
      kind: Deployment
      labelSelector: "app=benchmark-data-loader"
  # Patch PVC references to use prod PVCs
  - path: prod-eval-hf-pvc-patch.yaml
    target:
      kind: Deployment
      labelSelector: "app=benchmark-evaluator"
  - path: prod-load-hf-pvc-patch.yaml
    target:
      kind: Deployment
      labelSelector: "app=benchmark-data-loader"
